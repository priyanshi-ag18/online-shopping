<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>rymo.|Online Shopping</title>
  <script src="https://kit.fontawesome.com/fa1ff06f34.js" crossorigin="anonymous">

  </script>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg bg-white py-3 fixed-top">
    <div class="container">
      <img src="assets/logo1.png" alt="">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span><img src="assets/menu (1).png" width="25px" height="25px" alt=""></i></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">

          <li class="nav-item pl-2">
            <a class="nav-link" href="index.html">Home </a>
          </li>
          <li class="nav-item pl-2">
            <a class="nav-link pl-2" href="shop.html">Shop </a>
          </li>
          <li class="nav-item pl-2">
            <a class="nav-link pl-2" href="blog.html">Blog </a>
          </li>
          </li>
          <li class="nav-item pl-2">
            <a class="nav-link pl-2" href="#footer-section">Contact Us </a>
          </li>
          <li class="nav-item pl-2 pt-2">
            <i class="fa-solid fa-cart-shopping active"></i>
            <span id="demo" style=" font-size:12px; font-weight: 500; vertical-align: top;">0</span>
          </li>
      </div>
    </div>
  </nav>
  <section id="blog-home" class="pt-5 mt-5 container">
    <h1 class="font-weight-bold pt-5 text-center">Shopping Cart</h2>
      <hr class="mx-auto">
  </section>

  <section id="cart-container" class="container my-5">
    <table width="100%">
      <thead>
        <tr>
          <td>Image</td>
          <td class="mx-auto pl-5">Product</td>
          <td>Price</td>
          <td>Quantity</td>
          <td>Total</td>
          <td>Remove</td>
        </tr>
      </thead>
      <tbody id="products-show">
        <tr>
        </tr>
      </tbody>

    </table>
  </section>
  <br><br>
  
  <section id="cart-bottom" class="container">
    <div class="row">
      <div class="coupon col-lg-6 col-md-6 col-12 mb-4">
        <div>
          <h5>COUPON</h5>
          <p>Enter your coupon code if you have one.</p>
          <input type="text" placeholder="Coupon Code">
          <button>APPLY COUPON</button>
        </div>
      </div>
      <div class="tot col-lg-6 col-md-6 col-12 mb-4">
        <div>
          <h5>CART TOTAL</h5>
          <!-- <div class="d-flex justify-content-between">
        <h6>Subtotal</h6>
         <p id="sub-total"></p> -->
          <!-- </div> -->
          <div class="d-flex justify-content-between">
            <h6>Shipping</h6>
            <p>$0</p>
          </div>

          <hr class="second-hr">
          <div class="d-flex justify-content-between">
            <h6>Total</h6>
            <!-- <p id="sub-total"></p> -->
            <p id="sub-total"></p>
          </div>
          <div class="row mx-auto"></div>
          &emsp; &emsp; &nbsp; &nbsp;
          <button id="checkout1" class="ml-auto mx-auto" style="background-color:black;"
            onclick=" remove(), redirect()">Proceed to Checkout</button>
          <a href="shop.html"><button id="continueshop" class="my-auto" style="background-color:black;">Continue to Shop</button></a>
        </div>
      </div>
    </div>
    </div>
  </section>

  <!-- <h4 class="text-center" style="font-size:30px; font-family: Georgia, 'Times New Roman', Times, serif;">Sub-Total: ></span></h5> -->
  <br><br>

  <!-- footer -->
  <footer class="mt-5 py-5" id="footer-section">
    <div class="row conatiner mx-auto pt-5">
      <div class="footer-one col-lg-3 col-md-6 col-12">
        <img src="assets/logo2.png" alt="">
        <p class="pt-3">Fringilla urna porttitor dolor<br> purus luctus veneatis lectus manga<br>
          fringilla diam maecenas ultricies mi <br>eget mauris.
        </p>
      </div>
      <div class="footer-one col-lg-3 col-md-6 col-12 mb-3">
        <h5 pb-2>Featured</h5>
        <ul class="text-uppercase list-unstyled">
          <li><a href="#">Men</a></li>
          <li><a href="#">Women</a></li>
          <li><a href="#">Boys</a></li>
          <li><a href="#">Girls</a></li>
          <li><a href="#">New Arrivals</a></li>
          <li><a href="#">Shoes</a></li>
          <li><a href="#">Clothes</a></li>
        </ul>
      </div>
      <div class="footer-one col-lg-3 col-md-6 col-12 mb-3">
        <h5 pb-2>Contact Us</h5>
        <div>
          <h6 class="text-uppercase">Address</Address>
          </h6>
          <p>123 STREET NAME, CITY , US</p>
        </div>
        <div>
          <h6 class="text-uppercase">Phone</Address>
          </h6>
          <p>(123) 456-7890</p>
        </div>
        <div>
          <h6 class="text-uppercase">Email</Address>
          </h6>
          <p>mail@emaple.com</p>
        </div>
      </div>

      <div class="footer-one col-lg-3 col-md-6 col-12">
        <h5 pb-2>Instagram</h5>
        <div class="row">
          <img class="img-fluid w-25 h-100 m-2" src="assets/insta/1.jpg" alt="">
          <img class="img-fluid w-25 h-100 m-2" src="assets/insta/2.jpg" alt="">
          <img class="img-fluid w-25 h-100 m-2" src="assets/insta/3.jpg" alt="">
          <img class="img-fluid w-25 h-100 m-2" src="assets/insta/4.jpg" alt="">
          <img class="img-fluid w-25 h-100 m-2" src="assets/insta/5.jpg" alt="">


        </div>
      </div>
    </div>
    <div class="copyright mt-5">
      <div class="row container mx-auto">
        <div class="col-lg-3 col=md-6 col-12 mb-4">
          <img src="assets/payment.png" alt="">
        </div>
        <div class="col-lg-4 col=md-6 col-12">
          <p>Â©2018 All Rights Reserverd.</p>
        </div>
        <div class="col-lg-4 col=md-6 col-12 mb-2">
          <a href="#"><i class="fa-brands fa-facebook"></i></a>
          <a href="#"><i class="fa-brands fa-twitter-square"></i></a>
          <a href="#"><i class="fa-brands fa-linkedin"></i></a>
          <a href="#"><i class="fa-brands fa-instagram-square"></i></a>
        </div>
      </div>
    </div>
  </footer>
  <script src="./script.js"></script>
  <script>
    var demo = 0;
    document.getElementById("demo").innerHTML = localStorage.clickcount || 0;
    function ClickCounter(id) {
      let product = JSON.parse(localStorage.getItem('allProducts'));
      if (!product) return false;
      let i = 0;
      for (i = 0; i < product.length; i++) {
        let item = product[i];
        console.log(item.id);
        if (item.id == id) {
          let a = item.total;
          a += 1;
          product[i].total = a;
          localStorage.setItem('allProducts', JSON.stringify(product));
          break;
        }
      }
      if (i == products.length) {
        return false;
      }
      return true;
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
    integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"
    integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy"
    crossorigin="anonymous"></script>
  <script>
    let products = JSON.parse(localStorage.getItem(localStorage.key(2)));
    console.log(products);
    let total = 0
    for (let item of products) {
      total += parseInt(item.price);
    }
    document.querySelector("#sub-total").innerHTML = "$" + total;
    function incprice(a, b, c) {
      let id = '#' + c;
      console.log(id);
      console.log(a + b);
      document.querySelector(id).innerHTML = '$' + a * b;
      calculateTotal(a, b)
    }

    function calculateTotal(a, b) {
      let first = parseInt(a);
      let second = parseInt(b)
      total += a * b - (a - 1) * b
      document.querySelector("#sub-total").innerHTML = "$" + total;
    }
    function Quantity(pid, type, pprice) {
      let products = JSON.parse(localStorage.getItem('allProduct'));
      // console.log('running');
      var item;

      if (type.match('add')) {
        for (let i = 0; i < products.length; i++) {
          if (products[i].id == pid) {
            let a = document.getElementById(pid).textContent;
            a = parseInt(a) + 1;
            products[i].total = parseInt(products[i].total) + 1;
            document.getElementById(pid).textContent = a;
            localStorage.setItem('allProduct', JSON.stringify(products));
            console.log('running');
            let price = document.querySelector('#sub-total').textContent.substring(1);
            price = parseInt(price) + parseInt(pprice);
            document.querySelector('#sub-total').textContent = "$" + price;
            window.location.reload();
            break;
          }
        }

      }
      else {
        for (let i = 0; i < products.length; i++) {
          if (products[i].id == pid) {
            let a = document.getElementById(pid).textContent;
            if (a > 1) {
              a = parseInt(a) - 1;
              document.getElementById(pid).textContent = a;
              products[i].total = parseInt(products[i].total) - 1;

              localStorage.setItem('allProduct', JSON.stringify(products));
              let price = document.querySelector('#sub-total').textContent.substring(1);
              price = parseInt(price) - parseInt(pprice);
              document.querySelector('#sub-total').textContent = "$" + price;
              window.location.reload();
              break;
            }
          }
        }

      }
    }
    function showCart(products) {
      let output = '';
      let total = 0;
      for (let [index, item] of products.entries()) {
        total = parseInt(total) + item.price*item.total;
        output += `
                <tr>
                   
                    <td><img src="${item.image}" alt="" width="100%" height="100%" class="pb-3 pt-3"></td>
                    <td><h5>${item.name}</h5></td>
                  
      
                    <td><h5>$${item.price}</h5></td>
                    <td> <a class="text-center" onclick = "Quantity(${item.id},'add',${item.price})"><button class="plus" style="background-color:white; color: black;">+</button></a>
                    <a id = '${item.id}' style="font-size:20px;"> ${item.total} </a>
                    <span class="text-center" onclick = "Quantity(${item.id},'sub',${item.price})"><button class="plus" style="background-color:white; color: black;">-</button></span></td>
                    <h5><td id = '${item.name}'>$${item.price * item.total}</td></h5>  
                    <td><i onclick="removeSingle(${item.id})" class="fa-solid fa-trash"></i></td> 
                </tr>
        `;

      }
      document.querySelector("#products-show").innerHTML = output;
      document.querySelector('#sub-total').textContent = "$"+total;
    }


    showCart(products);
    function removeSingle(id) {
      let products = JSON.parse(localStorage.getItem('allProduct'));
      products = products.filter(x => x.id != id);
      localStorage.setItem('allProduct', JSON.stringify(products));
      window.location.reload();
    }

    function remove() {
      localStorage.clear();
      window.location.reload();
    }

    function myFunction() {
      alert("Your order is Placed!");
    }

    function redirect() {
      window.location.href = "placed.html";
    }
  </script>
</body>

</html>